(function(){"use strict";var t={4712:function(t,e,s){var r=s(5130),a=s(6768);const o={id:"app"},n={class:"app-header"},i={class:"container"},c={key:0,class:"nav"},l={key:1,class:"nav"},d={class:"app-main"},u={class:"container"};function h(t,e,s,r,h,p){const k=(0,a.g2)("router-link"),m=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("header",n,[(0,a.Lk)("div",i,[e[3]||(e[3]=(0,a.Lk)("h1",null,"‚è±Ô∏è –£—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏ ",-1)),e[4]||(e[4]=(0,a.Lk)("p",null,"–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –≤—Ä–µ–º—è –≤–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤",-1)),t.$store.getters.isAuthenticated?((0,a.uX)(),(0,a.CE)("nav",c,[(0,a.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>p.handleLogout&&p.handleLogout(...t)),class:"btn btn-logout"},"–í—ã–π—Ç–∏")])):((0,a.uX)(),(0,a.CE)("nav",l,[(0,a.bF)(k,{to:"/login",class:"nav-link"},{default:(0,a.k6)(()=>[...e[1]||(e[1]=[(0,a.eW)("–í–æ–π—Ç–∏",-1)])]),_:1}),(0,a.bF)(k,{to:"/register",class:"nav-link"},{default:(0,a.k6)(()=>[...e[2]||(e[2]=[(0,a.eW)("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è",-1)])]),_:1})]))])]),(0,a.Lk)("main",d,[(0,a.Lk)("div",u,[(0,a.bF)(m)])]),e[5]||(e[5]=(0,a.Lk)("footer",{class:"app-footer"},[(0,a.Lk)("div",{class:"container"},[(0,a.Lk)("p",null,"¬© 2025 –£—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏")])],-1))])}s(4114);var p=s(782),k={name:"App",methods:{...(0,p.i0)(["logout"]),async handleLogout(){await this.logout(),this.$router.push("/login")}}},m=s(1241);const f=(0,m.A)(k,[["render",h]]);var T=f,v=(s(8111),s(3579),s(1387)),g=s(4232);const L={class:"project-list"},y={class:"card"},b={class:"project-form"},j={class:"input-wrapper"},w=["disabled"],$={key:0,class:"card empty-state"},_={key:1},E={class:"projects-grid"},C=["onClick"],P={class:"project-header"},A={class:"project-time"},S={class:"project-created"};function I(t,e,s,o,n,i){return(0,a.uX)(),(0,a.CE)("div",L,[e[6]||(e[6]=(0,a.Lk)("div",{class:"header-card"},[(0,a.Lk)("div",{class:"header-content"},[(0,a.Lk)("h2",null,"–ú–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã"),(0,a.Lk)("p",null,"–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏")])],-1)),(0,a.Lk)("div",y,[e[4]||(e[4]=(0,a.Lk)("h3",null,"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç",-1)),(0,a.Lk)("div",b,[(0,a.Lk)("div",j,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.newProjectName=t),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞",class:"form-control project-input",onKeyup:e[1]||(e[1]=(0,r.jR)((...t)=>i.createProject&&i.createProject(...t),["enter"]))},null,544),[[r.Jo,n.newProjectName]])]),(0,a.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>i.createProject&&i.createProject(...t)),class:"btn btn-primary add-project-btn",disabled:!n.newProjectName.trim()},[...e[3]||(e[3]=[(0,a.Lk)("span",{class:"btn-icon"},"+",-1),(0,a.eW)(" –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç ",-1)])],8,w)])]),0===t.projects.length?((0,a.uX)(),(0,a.CE)("div",$,[...e[5]||(e[5]=[(0,a.Lk)("div",{class:"empty-icon"},"üìÅ",-1),(0,a.Lk)("h3",null,"–ü–æ–∫–∞ –Ω–µ—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤",-1),(0,a.Lk)("p",null,"–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –ø—Ä–æ–µ–∫—Ç —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å",-1)])])):((0,a.uX)(),(0,a.CE)("div",_,[(0,a.Lk)("div",E,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.projects,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"project-card card",onClick:s=>t.$router.push(`/project/${e.id}`)},[(0,a.Lk)("div",P,[(0,a.Lk)("h3",null,(0,g.v_)(e.name),1),(0,a.Lk)("span",A,(0,g.v_)(i.formatTime(e.total_time)),1)]),(0,a.Lk)("p",S,"–°–æ–∑–¥–∞–Ω: "+(0,g.v_)(i.formatDate(e.created_at)),1)],8,C))),128))])]))])}var R={name:"ProjectList",data(){return{newProjectName:""}},computed:{...(0,p.aH)(["projects"])},methods:{...(0,p.i0)(["createProject","fetchProjects"]),async createProject(){if(this.newProjectName.trim())try{await this.$store.dispatch("createProject",{name:this.newProjectName}),this.newProjectName="",this.$toast?this.$toast.success("–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!"):console.log("–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!")}catch(t){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:",t),this.$toast?this.$toast.error("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç"):console.error("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç")}},formatTime(t){if(!t)return"0—á 0–º 0—Å";const e=Math.floor(t/3600),s=Math.floor(t%3600/60),r=Math.floor(t%60);return`${e}—á ${s}–º ${r}—Å`},formatDate(t){if(!t)return"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –¥–∞—Ç–∞";const e=new Date(t);return e.toLocaleDateString("ru-RU")}},async mounted(){try{await this.fetchProjects()}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤:",t),this.$toast?this.$toast.error("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—ã"):console.error("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—ã")}}};const O=(0,m.A)(R,[["render",I],["__scopeId","data-v-1c1cdc57"]]);var x=O;const X={class:"project-detail"},D={class:"header-section"},U={class:"header-top"},K={class:"left-actions"},J={class:"header-actions"},N={class:"project-info-card"},M={class:"project-title"},W={class:"total-time"},q={class:"time"},H={key:0,class:"loading"},V={class:"card task-input-card"},F={class:"task-form"},B={class:"form-group full-width-input"},Q=["disabled"],z={key:1,class:"card empty-state"},G={key:2},Y={class:"tasks-header"},Z={class:"tasks-list"},tt={class:"task-content"},et={class:"task-header"},st={class:"task-time"},rt={class:"task-controls"},at={class:"timer-controls"},ot=["onClick","disabled"],nt=["onClick"],it={key:0,class:"timer-active-indicator"},ct={class:"task-actions"},lt=["onClick"];function dt(t,e,s,o,n,i){return(0,a.uX)(),(0,a.CE)("div",X,[(0,a.Lk)("div",D,[(0,a.Lk)("div",U,[(0,a.Lk)("div",K,[(0,a.Lk)("button",{onClick:e[0]||(e[0]=e=>t.$router.push("/")),class:"btn back-btn"},"‚Üê –ù–∞–∑–∞–¥ –∫ –ø—Ä–æ–µ–∫—Ç–∞–º")]),(0,a.Lk)("div",J,[(0,a.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>i.exportToTxt&&i.exportToTxt(...t)),class:"btn btn-export"},[...e[7]||(e[7]=[(0,a.Lk)("span",{class:"btn-icon"},"üìÑ",-1),(0,a.eW)(" –≠–∫—Å–ø–æ—Ä—Ç TXT ",-1)])]),(0,a.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>i.copyToClipboard&&i.copyToClipboard(...t)),class:"btn btn-copy"},[...e[8]||(e[8]=[(0,a.Lk)("span",{class:"btn-icon"},"üìã",-1),(0,a.eW)(" –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç ",-1)])]),(0,a.Lk)("button",{onClick:e[3]||(e[3]=(...t)=>i.deleteProjectHandler&&i.deleteProjectHandler(...t)),class:"btn btn-danger"},[...e[9]||(e[9]=[(0,a.Lk)("span",{class:"btn-icon"},"üóëÔ∏è",-1),(0,a.eW)(" –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç ",-1)])])])]),(0,a.Lk)("div",N,[(0,a.Lk)("h2",M,(0,g.v_)(n.project.name),1),(0,a.Lk)("div",W,[e[10]||(e[10]=(0,a.Lk)("span",{class:"label"},"–û–±—â–µ–µ –≤—Ä–µ–º—è –ø—Ä–æ–µ–∫—Ç–∞:",-1)),(0,a.Lk)("span",q,(0,g.v_)(i.formatTime(n.localTotalTime)),1)])])]),n.loading?((0,a.uX)(),(0,a.CE)("div",H,"–ó–∞–≥—Ä—É–∑–∫–∞...")):(0,a.Q3)("",!0),(0,a.Lk)("div",V,[e[11]||(e[11]=(0,a.Lk)("h3",null,"–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É",-1)),(0,a.Lk)("div",F,[(0,a.Lk)("div",B,[(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":e[4]||(e[4]=t=>n.newTaskTitle=t),placeholder:"–û–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É –ø–æ–¥—Ä–æ–±–Ω–æ...",class:"form-control task-input",rows:"4",onKeyup:e[5]||(e[5]=(0,r.jR)((0,r.D$)((...t)=>i.addTask&&i.addTask(...t),["prevent"]),["enter"]))},"                    ",544),[[r.Jo,n.newTaskTitle]])]),(0,a.Lk)("button",{onClick:e[6]||(e[6]=(...t)=>i.addTask&&i.addTask(...t)),class:"btn btn-primary add-task-btn",disabled:!n.newTaskTitle.trim()}," + –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É ",8,Q)])]),0===i.projectTasks.length?((0,a.uX)(),(0,a.CE)("div",z,[...e[12]||(e[12]=[(0,a.Lk)("div",{class:"empty-icon"},"üìù",-1),(0,a.Lk)("h3",null,"–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á",-1),(0,a.Lk)("p",null,"–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏",-1)])])):((0,a.uX)(),(0,a.CE)("div",G,[(0,a.Lk)("div",Y,[(0,a.Lk)("h3",null,"–ó–∞–¥–∞—á–∏ ("+(0,g.v_)(i.projectTasks.length)+")",1)]),(0,a.Lk)("div",Z,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.projectTasks,t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id,class:(0,g.C4)(["task-item card",{"task-active":t.is_timer_running}])},[(0,a.Lk)("div",tt,[(0,a.Lk)("div",et,[(0,a.Lk)("h4",null,(0,g.v_)(t.title),1),(0,a.Lk)("span",st,(0,g.v_)(i.formatTime(t.total_time)),1)]),(0,a.Lk)("div",rt,[(0,a.Lk)("div",at,[t.is_timer_running?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:e=>i.pauseTaskTimer(t.id),class:"btn btn-pause"},[...e[14]||(e[14]=[(0,a.Lk)("span",{class:"btn-icon"},"‚è∏",-1),(0,a.eW)(" –ü–∞—É–∑–∞ ",-1)])],8,nt)):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:e=>i.startTaskTimer(t.id),class:"btn btn-start",disabled:t.is_timer_running},[...e[13]||(e[13]=[(0,a.Lk)("span",{class:"btn-icon"},"‚ñ∂",-1),(0,a.eW)(" –°—Ç–∞—Ä—Ç ",-1)])],8,ot))]),t.is_timer_running?((0,a.uX)(),(0,a.CE)("div",it,[...e[15]||(e[15]=[(0,a.Lk)("span",{class:"pulse"},null,-1),(0,a.eW)(" –¢–∞–π–º–µ—Ä –∑–∞–ø—É—â–µ–Ω... ",-1)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",ct,[(0,a.Lk)("button",{onClick:e=>i.deleteTaskHandler(t.id),class:"btn btn-danger btn-sm"},[...e[16]||(e[16]=[(0,a.Lk)("span",{class:"btn-icon"},"üóëÔ∏è",-1)])],8,lt)])])])],2))),128))])]))])}s(2489),s(116),s(7588),s(8237),s(4603),s(7566),s(8721);var ut={name:"ProjectDetail",data(){return{newTaskTitle:"",project:{},updateInterval:null,loading:!0,debugMode:!1,localTotalTime:0}},computed:{...(0,p.aH)(["projects","tasks"]),...(0,p.L8)(["getTasksByProjectId"]),projectId(){return parseInt(this.$route.params.id)},projectTasks(){return this.getTasksByProjectId(this.projectId)}},watch:{projectTasks:{handler(t){this.localTotalTime=t.reduce((t,e)=>t+(e.total_time||0),0);const e=this.projects.findIndex(t=>t.id===this.projectId);-1!==e&&(this.$store.state.projects[e].total_time=this.localTotalTime)},deep:!0,immediate:!0}},methods:{...(0,p.i0)(["fetchProjects","fetchTasks","startTimer","pauseTimer","createTask","deleteProject","deleteTask"]),async addTask(){if(this.newTaskTitle.trim())try{await this.createTask({title:this.newTaskTitle,project_id:this.projectId}),this.newTaskTitle="",this.$toast&&this.$toast.success("–ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞!")}catch(t){console.error("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏:",t),this.$toast&&this.$toast.error("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É")}},formatTime(t){if(!t)return"0—á 0–º 0—Å";const e=Math.floor(t/3600),s=Math.floor(t%3600/60),r=Math.floor(t%60);return`${e}—á ${s}–º ${r}—Å`},async startTaskTimer(t){try{await this.startTimer(t),this.$toast&&this.$toast.success("–¢–∞–π–º–µ—Ä –∑–∞–ø—É—â–µ–Ω")}catch(e){console.error("–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Ç–∞–π–º–µ—Ä–∞:",e),this.$toast&&this.$toast.error("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä")}},async pauseTaskTimer(t){try{await this.pauseTimer(t),this.$toast&&this.$toast.info("–¢–∞–π–º–µ—Ä –Ω–∞ –ø–∞—É–∑–µ")}catch(e){console.error("–û—à–∏–±–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–∞–π–º–µ—Ä–∞:",e),this.$toast&&this.$toast.error("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä")}},generateReportText(){let t=`–ü—Ä–æ–µ–∫—Ç: ${this.project.name}\n`;return t+=`–û–±—â–µ–µ –≤—Ä–µ–º—è: ${this.formatTime(this.localTotalTime)}\n`,t+=`–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ: ${(new Date).toLocaleString("ru-RU")}\n\n`,t+="–ó–∞–¥–∞—á–∏:\n",t+="=".repeat(50)+"\n\n",this.projectTasks.forEach((e,s)=>{t+=`${s+1}. ${e.title}\n`,t+=`   –í—Ä–µ–º—è: ${this.formatTime(e.total_time)}\n`,t+=`   –°—Ç–∞—Ç—É—Å: ${e.is_timer_running?"–ó–∞–ø—É—â–µ–Ω":"–ù–∞ –ø–∞—É–∑–µ"}\n`,t+="-".repeat(30)+"\n"}),t},exportToTxt(){const t=this.generateReportText(),e=new Blob([t],{type:"text/plain"}),s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download=`${this.project.name.replace(/\s+/g,"_")}_–æ—Ç—á–µ—Ç.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),this.$toast&&this.$toast.success("–û—Ç—á–µ—Ç —É—Å–ø–µ—à–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω!")},async copyToClipboard(){try{const t=this.generateReportText();await navigator.clipboard.writeText(t),this.$toast&&this.$toast.success("–û—Ç—á–µ—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!")}catch(t){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±—É—Ñ–µ—Ä:",t),this.$toast&&this.$toast.error("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞")}},async deleteProjectHandler(){if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç? –í—Å–µ –∑–∞–¥–∞—á–∏ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã."))try{await this.deleteProject(this.projectId),this.$toast&&this.$toast.success("–ü—Ä–æ–µ–∫—Ç —É–¥–∞–ª–µ–Ω"),this.$router.push("/")}catch(t){console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞:",t),this.$toast&&this.$toast.error("–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç")}},async deleteTaskHandler(t){if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É?"))try{await this.deleteTask(t),this.$toast&&this.$toast.success("–ó–∞–¥–∞—á–∞ —É–¥–∞–ª–µ–Ω–∞")}catch(e){console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏:",e),this.$toast&&this.$toast.error("–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É")}}},async mounted(){try{this.loading=!0,await this.fetchProjects(),await this.fetchTasks(),this.project=this.projects.find(t=>t.id===this.projectId)||{},console.log("–ü—Ä–æ–µ–∫—Ç—ã:",this.projects),console.log("–ó–∞–¥–∞—á–∏:",this.tasks),console.log("–ó–∞–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞:",this.projectTasks),this.updateInterval=setInterval(async()=>{const t=this.projectTasks.filter(t=>t.is_timer_running);t.length>0&&await this.fetchTasks()},1e3)}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–µ—Ç–∞–ª–µ–π –ø—Ä–æ–µ–∫—Ç–∞:",t),this.$toast&&this.$toast.error("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞")}finally{this.loading=!1}},beforeUnmount(){this.updateInterval&&clearInterval(this.updateInterval)}};const ht=(0,m.A)(ut,[["render",dt],["__scopeId","data-v-569df1fc"]]);var pt=ht;const kt={class:"login-container"},mt={class:"login-card"},ft={class:"form-group"},Tt={class:"form-group"},vt=["disabled"],gt={class:"register-link"},Lt={key:0,class:"error"};function yt(t,e,s,o,n,i){return(0,a.uX)(),(0,a.CE)("div",kt,[(0,a.Lk)("div",mt,[e[5]||(e[5]=(0,a.Lk)("h2",null,"–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É",-1)),(0,a.Lk)("form",{onSubmit:e[3]||(e[3]=(0,r.D$)((...t)=>i.handleLogin&&i.handleLogin(...t),["prevent"]))},[(0,a.Lk)("div",ft,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.username=t),type:"text",placeholder:"–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",required:""},null,512),[[r.Jo,n.username]])]),(0,a.Lk)("div",Tt,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>n.password=t),type:"password",placeholder:"–ü–∞—Ä–æ–ª—å",required:""},null,512),[[r.Jo,n.password]])]),(0,a.Lk)("button",{type:"submit",disabled:n.loading},"–í–æ–π—Ç–∏",8,vt),(0,a.Lk)("p",gt,[e[4]||(e[4]=(0,a.eW)(" –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? ",-1)),(0,a.Lk)("a",{href:"#",onClick:e[2]||(e[2]=(0,r.D$)(e=>t.$router.push("/register"),["prevent"]))},"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è")])],32),n.error?((0,a.uX)(),(0,a.CE)("p",Lt,(0,g.v_)(n.error),1)):(0,a.Q3)("",!0)])])}var bt={name:"UserLogin",data(){return{username:"",password:"",loading:!1,error:""}},methods:{...(0,p.i0)(["login"]),async handleLogin(){this.loading=!0,this.error="";try{await this.login({username:this.username,password:this.password}),this.$router.push("/")}catch(t){this.error="–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å"}finally{this.loading=!1}}}};const jt=(0,m.A)(bt,[["render",yt],["__scopeId","data-v-013bd1b2"]]);var wt=jt;const $t={class:"register-container"},_t={class:"register-card"},Et={class:"form-group"},Ct={class:"form-group"},Pt={class:"form-group"},At=["disabled"],St={class:"login-link"},It={key:0,class:"error"};function Rt(t,e,s,o,n,i){return(0,a.uX)(),(0,a.CE)("div",$t,[(0,a.Lk)("div",_t,[e[6]||(e[6]=(0,a.Lk)("h2",null,"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è",-1)),(0,a.Lk)("form",{onSubmit:e[4]||(e[4]=(0,r.D$)((...t)=>i.handleRegister&&i.handleRegister(...t),["prevent"]))},[(0,a.Lk)("div",Et,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.username=t),type:"text",placeholder:"–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",required:""},null,512),[[r.Jo,n.username]])]),(0,a.Lk)("div",Ct,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>n.password=t),type:"password",placeholder:"–ü–∞—Ä–æ–ª—å",required:""},null,512),[[r.Jo,n.password]])]),(0,a.Lk)("div",Pt,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>n.confirmPassword=t),type:"password",placeholder:"–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å",required:""},null,512),[[r.Jo,n.confirmPassword]])]),(0,a.Lk)("button",{type:"submit",disabled:n.loading},"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è",8,At),(0,a.Lk)("p",St,[e[5]||(e[5]=(0,a.eW)(" –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? ",-1)),(0,a.Lk)("a",{href:"#",onClick:e[3]||(e[3]=(0,r.D$)(e=>t.$router.push("/login"),["prevent"]))},"–í–æ–π—Ç–∏")])],32),n.error?((0,a.uX)(),(0,a.CE)("p",It,(0,g.v_)(n.error),1)):(0,a.Q3)("",!0)])])}var Ot={name:"UserRegister",data(){return{username:"",password:"",confirmPassword:"",loading:!1,error:""}},methods:{...(0,p.i0)(["register","login"]),async handleRegister(){if(this.password===this.confirmPassword){this.loading=!0,this.error="";try{await this.register({username:this.username,password:this.password}),await this.login({username:this.username,password:this.password}),this.$router.push("/")}catch(t){this.error="–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç. –í–æ–∑–º–æ–∂–Ω–æ, –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –∑–∞–Ω—è—Ç–æ."}finally{this.loading=!1}}else this.error="–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç"}}};const xt=(0,m.A)(Ot,[["render",Rt],["__scopeId","data-v-d9d9b112"]]);var Xt=xt,Dt=s(4373);const Ut="https://rusla9m5.beget.tech/api";var Kt=(0,p.y$)({state:{projects:[],tasks:[],timeEntries:[]},mutations:{SET_TOKEN(t,e){t.token=e,localStorage.setItem("token",e),Dt.A.defaults.headers.common["Authorization"]=`Bearer ${e}`},CLEAR_TOKEN(t){t.token="",localStorage.removeItem("token"),delete Dt.A.defaults.headers.common["Authorization"]},SET_USER(t,e){t.user=e},SET_PROJECTS(t,e){t.projects=e},SET_TASKS(t,e){t.tasks=e},SET_TIME_ENTRIES(t,e){t.timeEntries=e},ADD_PROJECT(t,e){t.projects.push(e)},ADD_TASK(t,e){t.tasks.push(e)}},actions:{async login({commit:t},e){try{const s=await Dt.A.post(`${Ut}/login`,e);return t("SET_TOKEN",s.data.access_token),s.data}catch(s){throw console.error("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:",s),s}},async register(t,e){try{const t=await Dt.A.post(`${Ut}/register`,e);return t.data}catch(s){throw console.error("–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:",s),s}},async logout({commit:t}){t("CLEAR_TOKEN"),t("SET_USER",null)},async fetchProjects({commit:t}){try{const e=await Dt.A.get(`${Ut}/projects/`);t("SET_PROJECTS",e.data)}catch(e){throw console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤:",e),e}},async createProject({commit:t},e){try{const s=await Dt.A.post(`${Ut}/projects/`,e);return t("ADD_PROJECT",s.data),s.data}catch(s){throw console.error("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞:",s),s}},async fetchTasks({commit:t}){try{console.log("–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á –∏–∑:",`${Ut}/tasks/`);const e=await Dt.A.get(`${Ut}/tasks/`);console.log("–û—Ç–≤–µ—Ç –∑–∞–¥–∞—á:",e.data),t("SET_TASKS",e.data)}catch(e){throw console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á:",e),e}},async createTask({commit:t},e){try{const s=await Dt.A.post(`${Ut}/tasks/`,e);return t("ADD_TASK",s.data),s.data}catch(s){throw console.error("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏:",s),s}},async startTimer({dispatch:t},e){try{await Dt.A.post(`${Ut}/timer/start/${e}`),await t("fetchTasks")}catch(s){throw console.error("Error starting timer:",s),s}},async pauseTimer({dispatch:t},e){try{await Dt.A.post(`${Ut}/timer/pause/${e}`),await t("fetchTasks")}catch(s){throw console.error("Error pausing timer:",s),s}},async deleteProject({commit:t},e){try{await Dt.A.delete(`${Ut}/projects/${e}`),t("SET_PROJECTS",this.state.projects.filter(t=>t.id!==e))}catch(s){throw console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞:",s),s}},async deleteTask({commit:t},e){try{await Dt.A.delete(`${Ut}/tasks/${e}`),t("SET_TASKS",this.state.tasks.filter(t=>t.id!==e))}catch(s){throw console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏:",s),s}}},getters:{isAuthenticated:t=>!!t.token,getTasksByProjectId:t=>e=>t.tasks.filter(t=>t.project_id===e),getActiveTimer:t=>e=>{const s=t.tasks.find(t=>t.id===e);return!!s&&s.is_timer_running}}});const Jt=[{path:"/",name:"Home",component:x,meta:{requiresAuth:!0}},{path:"/project/:id",name:"ProjectDetail",component:pt,props:!0,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:wt},{path:"/register",name:"Register",component:Xt}],Nt=(0,v.aE)({history:(0,v.LA)("/timer_tracker/"),routes:Jt});Nt.beforeEach((t,e,s)=>{t.matched.some(t=>t.meta.requiresAuth)?Kt.getters.isAuthenticated?s():s("/login"):s()});var Mt=Nt,Wt=s(7411);s(7917);const qt=(0,r.Ef)(T);qt.use(Kt),qt.use(Mt),qt.use(Wt.Ay,{transition:"Vue-Toastification__bounce",maxToasts:20,newestOnTop:!0}),qt.mount("#app")}},e={};function s(r){var a=e[r];if(void 0!==a)return a.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,s),o.exports}s.m=t,function(){var t=[];s.O=function(e,r,a,o){if(!r){var n=1/0;for(d=0;d<t.length;d++){r=t[d][0],a=t[d][1],o=t[d][2];for(var i=!0,c=0;c<r.length;c++)(!1&o||n>=o)&&Object.keys(s.O).every(function(t){return s.O[t](r[c])})?r.splice(c--,1):(i=!1,o<n&&(n=o));if(i){t.splice(d--,1);var l=a();void 0!==l&&(e=l)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[r,a,o]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,r){var a,o,n=r[0],i=r[1],c=r[2],l=0;if(n.some(function(e){return 0!==t[e]})){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(c)var d=c(s)}for(e&&e(r);l<n.length;l++)o=n[l],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(d)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=s.O(void 0,[504],function(){return s(4712)});r=s.O(r)})();
//# sourceMappingURL=app.967fb630.js.map